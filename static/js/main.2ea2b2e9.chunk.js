(this["webpackJsonpfabric-demo"]=this["webpackJsonpfabric-demo"]||[]).push([[0],{27:function(t,e,n){t.exports=n(59)},32:function(t,e,n){},33:function(t,e,n){},37:function(t,e){},38:function(t,e){},46:function(t,e){},48:function(t,e){},58:function(t,e){},59:function(t,e,n){"use strict";n.r(e);var g=n(0),i=n.n(g),o=n(24),a=n.n(o),r=(n(32),n(33),n(34),n(25)),l=n(26),s=window.fabric,f=function(t){var e=t.canvas,n=t.text,g=void 0===n?"click to enter text":n,i=t.margin,o=void 0===i?10:i,a=new s.Textbox(g,{top:o,left:o,fontSize:14,padding:o,textAlign:"left"});e.add(a),e.setActiveObject(a),a.enterEditing(),a.setSelectionStart(a.text.length),a.setSelectionEnd(a.text.length)},h=window.fabric,c=function(t){var e=t.canvas,n=t.top,g=void 0===n?0:n,i=t.left,o=void 0===i?0:i,a=t.height,r=void 0===a?100:a,l=t.width,s=void 0===l?100:l,f=t.fill,c=void 0===f?"red":f,p=new h.Rect({top:g,left:o,height:r,width:s,fill:c});e.add(p)},p=window.fabric,u=function(t){var e,n=t.width,o=void 0===n?600:n,a=t.height,s=void 0===a?400:a,h=t.margin,u=void 0===h?10:h,d=Object(l.a)(t,["width","height","margin"]),b=Object(g.useState)(null),L=Object(r.a)(b,2),T=L[0],v=L[1],m=u;Object(g.useEffect)((function(){v(new p.Canvas(e,{backgroundColor:"white"}))}),[e]);var k=i.a.Children.map(d.children,(function(t){return i.a.cloneElement(t,{canvas:T})})),W=function(t,e,n,g){Math.abs(t)>Math.abs(e)?t>0?(n.setLeft(g.getLeft()-n.getWidth()-u),n.getLeft()<m&&n.setLeft(g.getLeft()+n.getWidth()-2*u)):(n.setLeft(g.getLeft()+n.getWidth()+u),n.getWidth()+n.getLeft()>o-m&&n.setLeft(g.getLeft()-n.getWidth()+u)):e>0?(n.setTop(g.getTop()-n.getHeight()-u),n.getTop()<m&&n.setTop(g.getTop()+n.getHeight()-2*u)):(n.setTop(g.getTop()+g.getHeight()+u),n.getHeight()+n.getTop()>s-m&&n.setTop(g.getTop()-n.getHeight()+u))};return T&&T.on("object:moving",(function(t){t.target.setCoords(),t.target.getLeft()<m&&t.target.setLeft(u),t.target.getTop()<m&&t.target.setTop(u),t.target.getWidth()+t.target.getLeft()>o-m&&t.target.setLeft(o-t.target.getWidth()-u),t.target.getHeight()+t.target.getTop()>s-m&&t.target.setTop(s-t.target.getHeight()-u),T.forEachObject((function(e){if(e!==t.target){if(t.target.isContainedWithinObject(e)||t.target.intersectsWithObject(e)||e.isContainedWithinObject(t.target)){var n=(e.getLeft()+e.getWidth())/2-(t.target.getLeft()+t.target.getWidth())/2,g=(e.getTop()+e.getHeight())/2-(t.target.getTop()+t.target.getHeight())/2;W(n,g,t.target,e)}Math.abs(t.target.getTop()+t.target.getHeight()-(e.getTop()+e.getHeight()))<m&&(Math.abs(t.target.getLeft()-(e.getLeft()+e.getWidth()))<m&&(t.target.setLeft(e.getLeft()+e.getWidth()),t.target.setTop(e.getTop()+e.getHeight()-t.target.getHeight())),Math.abs(t.target.getLeft()+t.target.getWidth()-e.getLeft())<m&&(t.target.setLeft(e.getLeft()-t.target.getWidth()),t.target.setTop(e.getTop()+e.getHeight()-t.target.getHeight()))),Math.abs(t.target.getTop()-e.getTop())<m&&(Math.abs(t.target.getLeft()-(e.getLeft()+e.getWidth()))<m&&(t.target.setLeft(e.getLeft()+e.getWidth()),t.target.setTop(e.getTop())),Math.abs(t.target.getLeft()+t.target.getWidth()-e.getLeft())<m&&(t.target.setLeft(e.getLeft()-t.target.getWidth()),t.target.setTop(e.getTop()))),Math.abs(t.target.getLeft()+t.target.getWidth()-(e.getLeft()+e.getWidth()))<m&&(Math.abs(t.target.getTop()-(e.getTop()+e.getHeight()))<m&&(t.target.setLeft(e.getLeft()+e.getWidth()-t.target.getWidth()),t.target.setTop(e.getTop()+e.getHeight())),Math.abs(t.target.getTop()+t.target.getHeight()-e.getTop())<m&&(t.target.setLeft(e.getLeft()+e.getWidth()-t.target.getWidth()),t.target.setTop(e.getTop()-t.target.getHeight()))),Math.abs(t.target.getLeft()-e.getLeft())<m&&(Math.abs(t.target.getTop()-(e.getTop()+e.getHeight()))<m&&(t.target.setLeft(e.getLeft()),t.target.setTop(e.getTop()+e.getHeight()+u)),Math.abs(t.target.getTop()+t.target.getHeight()-e.getTop())<m&&(t.target.setLeft(e.getLeft()),t.target.setTop(e.getTop()-t.target.getHeight())))}})),t.target.setCoords();var e=null,n=null,g=null,i=null;T.forEachObject((function(o){if(o!==t.target&&(t.target.isContainedWithinObject(o)||t.target.intersectsWithObject(o)||o.isContainedWithinObject(t.target))){var a=null,r=null,l=null,s=null,f=null,h=t.target.getLeft(),c=h+t.target.getWidth(),p=t.target.getTop(),u=p+t.target.getHeight(),d=o.getLeft(),b=d+o.getWidth(),L=o.getTop(),T=L+o.getHeight();if(h>=d&&h<=b?(a=h,l=o.getWidth()-(a-d)):d>=h&&d<=c&&(a=d,l=t.target.getWidth()-(a-h)),p>=L&&p<=T?(r=p,s=o.getHeight()-(r-L)):L>=p&&L<=u&&(r=L,s=t.target.getHeight()-(r-p)),l>0&&s>0&&(f=l*s),(o.getLeft()<e||null==e)&&(e=o.getLeft()),(o.getTop()<n||null==n)&&(n=o.getTop()),(o.getLeft()+o.getWidth()>g||null==g)&&(g=o.getLeft()+o.getWidth()),(o.getTop()+o.getHeight()>i||null==i)&&(i=o.getTop()+o.getHeight()),f){var v=g/2-(t.target.getLeft()+t.target.getWidth())/2,m=i/2-(t.target.getTop()+t.target.getHeight())/2;W(v,m,t.target,o)}}}))})),i.a.createElement(g.Fragment,null,i.a.createElement("canvas",{id:"canvas",ref:function(t){return e=t},width:o,height:s}),T&&k,i.a.createElement("button",{onClick:function(t){t.preventDefault(),console.log(T.toJSON())}},"To JSON"),i.a.createElement("button",{onClick:function(t){t.preventDefault(),T.loadFromJSON('{\n  "objects": [\n    {\n      "type": "rect",\n      "originX": "left",\n      "originY": "top",\n      "left": 636,\n      "top": 300,\n      "width": 100,\n      "height": 100,\n      "fill": "rgba(72,253,162, 0.75)",\n      "stroke": null,\n      "strokeWidth": 1,\n      "strokeDashArray": null,\n      "strokeLineCap": "butt",\n      "strokeLineJoin": "miter",\n      "strokeMiterLimit": 10,\n      "scaleX": 1,\n      "scaleY": 1,\n      "angle": 0,\n      "flipX": false,\n      "flipY": false,\n      "opacity": 1,\n      "shadow": null,\n      "visible": true,\n      "clipTo": null,\n      "backgroundColor": "",\n      "fillRule": "nonzero",\n      "globalCompositeOperation": "source-over",\n      "transformMatrix": null,\n      "rx": 0,\n      "ry": 0\n    },\n    {\n      "type": "rect",\n      "originX": "left",\n      "originY": "top",\n      "left": 341,\n      "top": 57,\n      "width": 100,\n      "height": 100,\n      "fill": "rgba(187,109,207, 0.75)",\n      "stroke": null,\n      "strokeWidth": 1,\n      "strokeDashArray": null,\n      "strokeLineCap": "butt",\n      "strokeLineJoin": "miter",\n      "strokeMiterLimit": 10,\n      "scaleX": 1,\n      "scaleY": 1,\n      "angle": 0,\n      "flipX": false,\n      "flipY": false,\n      "opacity": 1,\n      "shadow": null,\n      "visible": true,\n      "clipTo": null,\n      "backgroundColor": "",\n      "fillRule": "nonzero",\n      "globalCompositeOperation": "source-over",\n      "transformMatrix": null,\n      "rx": 0,\n      "ry": 0\n    },\n    {\n      "type": "rect",\n      "originX": "left",\n      "originY": "top",\n      "left": 51,\n      "top": 279,\n      "width": 100,\n      "height": 100,\n      "fill": "rgba(72,71,38, 0.75)",\n      "stroke": null,\n      "strokeWidth": 1,\n      "strokeDashArray": null,\n      "strokeLineCap": "butt",\n      "strokeLineJoin": "miter",\n      "strokeMiterLimit": 10,\n      "scaleX": 1,\n      "scaleY": 1,\n      "angle": 0,\n      "flipX": false,\n      "flipY": false,\n      "opacity": 1,\n      "shadow": null,\n      "visible": true,\n      "clipTo": null,\n      "backgroundColor": "",\n      "fillRule": "nonzero",\n      "globalCompositeOperation": "source-over",\n      "transformMatrix": null,\n      "rx": 0,\n      "ry": 0\n    },\n    {\n      "type": "rect",\n      "originX": "left",\n      "originY": "top",\n      "left": 353,\n      "top": 541,\n      "width": 100,\n      "height": 100,\n      "fill": "rgba(116,252,218, 0.75)",\n      "stroke": null,\n      "strokeWidth": 1,\n      "strokeDashArray": null,\n      "strokeLineCap": "butt",\n      "strokeLineJoin": "miter",\n      "strokeMiterLimit": 10,\n      "scaleX": 1,\n      "scaleY": 1,\n      "angle": 0,\n      "flipX": false,\n      "flipY": false,\n      "opacity": 1,\n      "shadow": null,\n      "visible": true,\n      "clipTo": null,\n      "backgroundColor": "",\n      "fillRule": "nonzero",\n      "globalCompositeOperation": "source-over",\n      "transformMatrix": null,\n      "rx": 0,\n      "ry": 0\n    }\n  ],\n  "background": "white"\n}'),T.forEachObject((function(t){t.lockMovementY=!0,t.lockMovementX=!0,t.lockScalingX=!0,t.hasControls=!1,t.lockRotation=!0,t.hasRotatingPoint=!1,t.editable=!1}))}},"Load"),i.a.createElement("button",{onClick:function(t){t.preventDefault();var e=[];if(T.forEachObject((function(t){e.push(t)})),e){var n=new p.Group(e);T.add(n)}}},"Group all"),i.a.createElement("button",{onClick:function(t){t.preventDefault(),f({canvas:T,margin:u})}},"Add new Textbox"),i.a.createElement("button",{onClick:function(t){t.preventDefault(),c({canvas:T})}},"Add new Rect"))},d=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(u,{height:680,width:800}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e){}},[[27,1,2]]]);
//# sourceMappingURL=main.2ea2b2e9.chunk.js.map